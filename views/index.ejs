<!DOCTYPE html> 

<html lang="no"> 

<head> 

    <meta charset="UTF-8"> 

    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

    <title>Brukerregistrering, Innlogging & Innlegg</title> 

</head> 

<body> 

 

    <% if (user) { %>  

        <h2>Velkommen, <%= user.username %>!</h2> 

        <form action="/logout" method="POST"> 

            <button type="submit">Logg ut</button> 

        </form> 

    <% } else { %> 

        <h2>Logg inn</h2> 

        <form action="/login" method="POST"> 

            <input type="text" name="username" placeholder="Brukernavn" required> 

            <input type="password" name="password" placeholder="Passord" required> 

            <button type="submit">Logg inn</button> 

        </form> 

 

        <h2>Registrer ny bruker</h2> 

        <form action="/register" method="POST"> 

            <input type="text" name="name" placeholder="Navn" required> 

            <input type="text" name="username" placeholder="Brukernavn" required> 

            <input type="email" name="email" placeholder="E-post" required> 

            <input type="password" name="password" placeholder="Passord" required> 

            <button type="submit">Registrer</button> 

        </form> 

    <% } %> 

 

    <h1>Innlegg</h1> 

    <ul> 

        <% posts.forEach(post => { %> 

            <li> 

                <strong><%= post.title %></strong> av <%= post.name %> <br> 

                <%= post.content %> 

            </li> 

        <% }); %> 

    </ul> 

 

    <% if (user) { %> 

        <h2>Legg til nytt innlegg</h2> 

        <form action="/add-post" method="POST"> 

            <input type="hidden" name="user_id" value="<%= user.id %>"> 

            <input type="text" name="title" placeholder="Tittel" required> 

            <textarea name="content" placeholder="Innhold" required></textarea> 

            <button type="submit">Publiser</button> 

        </form> 

    <% } %> 

 

    <h1>Kommentarer</h1> 

    <ul> 

        <% comments.forEach(comment => { %> 

            <li><strong><%= comment.name %>:</strong> <%= comment.comment %></li> 

        <% }); %> 

    </ul> 

 

    <% if (user) { %> 

        <h2>Legg til en kommentar</h2> 

        <form action="/add-comment" method="POST"> 

            <select name="post_id"> 

                <% posts.forEach(post => { %> 

                    <option value="<%= post.id %>"><%= post.title %></option> 

                <% }); %> 

            </select> 

            <input type="hidden" name="user_id" value="<%= user.id %>"> 

            <textarea name="comment" placeholder="Kommentar" required></textarea> 

            <button type="submit">Publiser</button> 

        </form> 

    <% } %> 

 

</body> 

</html> 